var goog=goog||{};goog.global=this;goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript("var "+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&opt_object!==undefined)cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};function l(p){function P(a,b,c){window.getSelection()?window.getSelection().removeAllRanges():document.selection.empty();h.save();h.moveTo(a,b);v=B/2*(z/320);w&&(x(document,"mousemove",w),x(document,"touchmove",w),x(document,"mouseup",y),x(document,"touchend",y));"touchstart"==c?(C(document,"touchmove",w),C(document,"touchend",y)):(C(document,"mousemove",w),C(document,"mouseup",y));r=null;M(a,b)}function M(a,b){var c,d;if(k.length&&(c=k[k.length-1],d=Math.sqrt((c.x-a)*(c.x-a)+(c.y-b)*(c.y-b)),0==
d))return;S++;navigator.userAgent.match(/ OS (\d+).*? Mac OS/)&&!Q&&2==k.length&&4*c<k[1].a&&(k[0].x-=2/3*(k[0].x-k[1].x),k[0].y-=2/3*(k[0].y-k[1].y),k[1].a/=2/3*k[1].a);c={x:a,y:b,a:d};k.push(c);3<=k.length&&(c=k.shift(),T(c))}function T(a,b){var c=a.x,d=a.y,F=a.a;if(!r||0!==F){var q=k.length?k[0]:null;if(F&&r){h.moveTo(r.x,r.y);var e;!Q&&q&&F>3*q.a&&(F/=4,e=1);Q=1;b||(b=U(F));N=b;if(e)for(e=1;3>=e;e++)V(c+e/3*(r.x-c),d+e/3*(r.y-d),F)}V(c,d,F);r=a}}function U(a){var b=z/320*B;return a<.003125*z?
1.625*b:a<.00625*z?1.375*b:a<.009375*z?1.25*b:a<.015625*z?1.125*b:a<.021875*z?b:a<.028125*z?.875*b:a<.034375*z?.75*b:a<.046875*z?.625*b:a<.0625*z?.5*b:.375*b}function V(a,b,c){var d={x:a,y:b},e=8,q=v;h.fillStyle=A;h.strokeStyle=A;if(r){e=Math.floor(Math.abs(c)/(v/3));if(1<e)for(q=v,c=0;c<e;c++)q-=(q-N)/(8<e?e:8);else Math.abs(v-N)>z/320*B*.025&&(q=v-(v-N)/8);a=Math.abs(v-q);1<=a&&(q=v>q?q+.4*a:q-.4*a);a=null;if(0<k.length){a=k[0];b=ba;var e=a.x-r.x,g=a.y-r.y,f=W(r,d),m=W(d,a),n=f+m;a=0==f||0==m||
(d.x-r.x)/(d.y-r.y)==(d.x-a.x)/(d.y-a.y)?null:[{x:d.x-e*b*f/n,y:d.y-g*b*f/n},{x:d.x+e*b*m/n,y:d.y+g*b*m/n}]}b=[r];if((G||a)&&c>2*q){e=a?a[0]:d;G=null==G?r:G;g=r;f=G;c=c/(2*q);m=[];for(n=0;n<c;n++){var p=(n+1)/(c+1),x,u,D,w,t,E,y,C;D=3*(f.x-g.x);u=3*(e.x-f.x)-D;x=d.x-g.x-D-u;E=3*(f.y-g.y);t=3*(e.y-f.y)-E;w=d.y-g.y-E-t;y=p*p;C=y*p;m.push({x:x*C+u*y+D*p+g.x,y:w*C+t*y+E*p+g.y})}b=b.concat(m)}b.push(d);d=b;b=v;e=q;m=b;for(g=1;g<d.length;g++)f=(e-b)/(d.length-1)+m,t=d[g-1],c=d[g],n=f,D=m*Math.sin(Math.atan((c.y-
t.y)/(c.x-t.x))),E=m*Math.cos(Math.atan((c.y-t.y)/(c.x-t.x))),w=n*Math.sin(Math.atan((c.y-t.y)/(c.x-t.x))),u=n*Math.cos(Math.atan((c.y-t.y)/(c.x-t.x))),p=t.x+D,x=t.y-E,D=t.x-D,t=t.y+E,E=c.x+w,y=c.y-u,w=c.x-w,u=c.y+u,h.beginPath(),h.moveTo(p,x),h.lineTo(E,y),h.lineTo(w,u),h.lineTo(D,t),h.lineTo(p,x),h.fill(),h.closePath(),h.lineWidth=m,h.beginPath(),h.arc(c.x,c.y,n,0,2*Math.PI),h.fill(),h.closePath(),m=f;h.lineWidth=v=q;!a||1>=a.length?G=null:G=a[1]}else 2<=k.length&&((q=k[1].a)&&(v=U(q)),v+=2),h.beginPath(),
h.fillStyle=A,h.arc(a,b,v,0,2*Math.PI),h.fill(),h.closePath()}function W(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function R(a){if("edit"===m){var b,c;if("touchstart"==a.type){if(2<=a.touches.length)return;b=a.touches[0].pageX;c=a.touches[0].pageY;x(e,"mousedown",R)}else b=a.pageX,c=a.pageY;X()||(canvasRect=e.getBoundingClientRect(),canvasRect={left:canvasRect.left+(window.scrollX||window.pageXOffset),top:canvasRect.top+(window.scrollY||window.pageYOffset)},b-=canvasRect.left,
c-=canvasRect.top,n={time:new Date,points:[{x:b,y:c,La:0}],color:A,penSize:B},P(b,c,a.type),a.preventDefault())}}function w(a){if("edit"===m){var b,c;if("touchmove"==a.type){if(2<=a.touches.length)return;b=a.touches[0].pageX;c=a.touches[0].pageY}else b=a.pageX,c=a.pageY;b-=canvasRect.left;c-=canvasRect.top;X()?y():(n.points.push({x:b,y:c,t:new Date-n.time}),M(b,c),a.preventDefault())}}function y(){"edit"===m&&(J(),g.length?n.time-=Y:(Y=n.time,n.time=n.time.getTime()),g.push(n),H=null,K=[],n=null)}
function X(){var a=0;n&&(a+=n.points.length);for(var b=0;b<g.length;b++)a+=g[b].points.length;return a>ca?!0:!1}function Z(){"play"==m&&(m=O,clearTimeout(I),L());"edit"===m&&(r=null,f=[-1,-1,-1,-1],S=0,g.length&&(H=g),g=[],h.beginPath(),h.clearRect(0,0,e.width,e.height),h.closePath())}function J(){x(document,"mousemove",w);x(document,"touchmove",w);x(document,"mouseup",y);x(document,"touchend",y);--h.I;for(var a;k.length;)a=k.shift(),T(a,z/320*B/8)}function aa(){function a(){A=b;B=c;u>=g.length?m=
O:(clearTimeout(I),I=setTimeout(function(){aa()},300))}var b=A,c=B,d=g[u];if(d&&"play"==m){A=d.color;B=d.penSize;P(d.points[0].x,d.points[0].y);1==d.points.length&&(J(),a());var e=1,f,h=0;f=d.points[e];(function(){f&&(M(f.x,f.y),e>=d.points.length-1&&(J(),a()),e++,f=d.points[e])&&(clearTimeout(I),I=setTimeout(arguments.callee,f.t-h),h=f.t)})();u++}}function L(){function a(){A=b;B=c;u>=g.length&&(m="edit")}var b=A,c=B;h.clearRect(0,0,e.width,e.height);h.beginPath();u=0;for(var d=g[u];d;){A=d.color;
B=d.penSize;P(d.points[0].x,d.points[0].y);1==d.points.length&&(J(),a());for(var f=1,k=1;f<d.points.length;f++){var n=d.points[k];k++;M(n.x,n.y);k>=d.points.length&&(J(),a())}u++;d=g[u]}}function C(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function x(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}var e=null;if(p.nodeType)e=p;else if("string"==typeof p)e=document.getElementById(p);else return;e.width=e.getBoundingClientRect().width;e.height=
e.getBoundingClientRect().height;e.style.backgroundColor=e.style.backgroundColor;window.onresize=function(){var a=e.getBoundingClientRect().width/e.width,b=e.getBoundingClientRect().height/e.height;if(1!=a||1!=b)e.width=e.getBoundingClientRect().width,e.height=e.getBoundingClientRect().height,e.style.backgroundColor=e.style.backgroundColor,Z()};window.onscroll=function(){};var g=[],K=[],v=1,N=1,A="rgba(0,0,0,1)",B=8,z=320,S=0,n=null,H=null,m="edit",f=[-1,-1,-1,-1],ba=.4,r=null,G=null,k=[],Q=0,Y=null,
u=0,O="edit",I=null,h=e.getContext("2d"),ca=5E3;(function(){e.getContext&&(h.strokeStyle=A,h.fillStyle=A,C(e,"selectstart",function(){return!1}),C(e,"touchstart",R),C(e,"mousedown",R))})();this.C=function(a){B=a};this.B=function(a){A=a};this.m=function(){return!!K.length};this.D=function(){if("edit"===m)if(H&&H.length)g=H,H=null,L();else if(g.length){var a=g.pop();K.push([a]);L()}};this.w=function(){"edit"===m&&K.length&&(g=g.concat(K.pop()),L())};this.A=
function(){0!=g.length&&("play"==m?(m=O,clearTimeout(I),L()):(O=m,m="play",h.clearRect(0,0,e.width,e.height),h.beginPath(),u=0,aa()))};this.o=function(){Z()};this.s=function(){for(var a='{"version":"3.2.0.2","strokes":[',b,c=0;c<g.length;c++){0!=c&&(a+=",");for(var a=a+('{"time":'+g[c].time+","),a=a+('"color":"'+g[c].color+'",'),a=a+('"penSize":"'+g[c].penSize+'",'),a=a+'"points":[',d=0;d<g[c].points.length;d++)b=g[c].points[d],0!=d&&(a+=","),a+='{"x":'+Math.round(100*b.x)/100+',"y":'+Math.round(100*
b.y)/100+',"t":'+(b.t||0)+"}";a+="]}"}return a+"]}"};this.u=function(){if(0>=g.length)return null;f=[-1,-1,-1,-1];for(var a=0;a<g.length;a++)for(var b=0;b<g[a].points.length;b++){var c=g[a].points[b],d=c.x,c=c.y,e=0>d-16?0:d-16,k=0>c-16?0:c-16;f[0]=0>f[0]?e:f[0];f[0]=f[0]>e?e:f[0];f[1]=f[1]<d+16?d+16:f[1];f[2]=0>f[2]?k:f[2];f[2]=f[2]>k?k:f[2];f[3]=f[3]<c+16?c+16:f[3]}a=h.getImageData(f[0],f[2],f[1]-f[0],f[3]-f[2]);b=document.createElement("CANVAS");d=b.getContext("2d");b.height=a.height;b.width=a.width;
d.putImageData(a,0,0);return b.toDataURL("image/png")};this.v=function(a){a=eval("("+a+")").strokes;if(!(0>=a.length)){this.b();for(var b=0;b<a.length;b++){for(var c=[],d=0;d<a[b].points.length;d++)c.push({x:a[b].points[d].x,y:a[b].points[d].y,t:a[b].points[d].t});g.push({time:a[b].time,points:c,color:a[b].color,penSize:a[b].penSize})}replay()}}}goog.exportSymbol("EPaper",l);l.prototype.j=function(p){this.C(p)};goog.exportProperty(l.prototype,"setPenSize",l.prototype.j);l.prototype.i=function(p){this.B(p)};
goog.exportProperty(l.prototype,"setPenColor",l.prototype.i);l.prototype.F=function(){return this.m()};goog.exportProperty(l.prototype,"canRedo",l.prototype.F);l.prototype.l=function(){this.D()};goog.exportProperty(l.prototype,"undo",l.prototype.l);l.prototype.g=function(){this.w()};goog.exportProperty(l.prototype,"redo",l.prototype.g);l.prototype.h=function(){this.A()};goog.exportProperty(l.prototype,"replay",l.prototype.h);l.prototype.b=function(){this.o()};
goog.exportProperty(l.prototype,"clear",l.prototype.b);l.prototype.G=function(){return this.s()};goog.exportProperty(l.prototype,"getHandWritingJson",l.prototype.G);l.prototype.H=function(){return this.u()};goog.exportProperty(l.prototype,"getHandWritingPng",l.prototype.H);l.prototype.f=function(p){this.v(p)};goog.exportProperty(l.prototype,"playWithJson",l.prototype.f);l.prototype.c=function(){return"3.2.0.2"};goog.exportProperty(l.prototype,"getVersion",l.prototype.c);